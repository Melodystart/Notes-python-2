# 中級約維安學習筆記 - python

https://datainpoint.substack.com/s/jovyans

## 第十四週 | Python 的資料結構。
```
串列 list
tuple
字典 dict
集合 set
```
- 在 Python 中物件（Objects）是類別（Classes）的實例（Instances）
-  Python 中使用函數有兩種機制，一是對資料型別或資料結構應用函數；二是呼叫綁定於資料型別或資料結構的方法，這時要注意，我們不再稱呼「函數」，而是改稱「方法」。
```
primes_list = [11, 7, 5, 3, 2]
sorted(primes_list) # Apply sorted function to primes_list 函數
primes_list.sort()  # Call sort method of primes_list 方法
```
- sorted(a_list_to_be_sorted) 是以回傳值輸出排序後的串列，因此如果沒有將回傳值更新原本命名的串列，排序的更動並不會被保留。
```
primes_list = [11, 7, 5, 3, 2]
sorted(primes_list) # Apply sorted function to primes_list
print(primes_list)  # primes_list is not sorted
primes_list = sorted(primes_list)  # Update primes_list with function output
print(primes_list)  # primes_list is now sorted
## [11, 7, 5, 3, 2]
## [2, 3, 5, 7, 11]
```
- 而 a_list_to_be_sorted.sort() 則是直接將排序更動了，不需要更新原本命名的串列，也不會伴隨有回傳值。
```
primes_list = [11, 7, 5, 3, 2]
primes_list.sort()  # Call sort method of primes_list
print(primes_list)  # primes_list is sorted
## [2, 3, 5, 7, 11]
```
- 函數或者方法多數情況下會在「以回傳值輸出」或「直接更動物件狀態」中擇一，少數情況下也會有兩者兼具的情況，例如串列方法 pop() 能夠將串列末端的資料拋出為回傳值，並刪除串列末端的資料點。
```
primes_list = [11, 7, 5, 3, 2]
the_last_element = primes_list.pop()
print(primes_list)       # The last element was deleted
print(the_last_element)  # The last element was returned
## [11, 7, 5, 3]
## 2
```
### 串列 list
- 有時候我們也使用 Python 的內建函數 list() 來建立串列，例如常被用來生成數列的內建函數 range() 其輸出是一個可以被迭代的物件（Iterable），屬於 range 類別，如果直接應用不會被印出所有的數字，這時可以用 list() 函數將它轉換為 list 來觀察其中包含的數字。
```
integer_sequence = range(10)
print(integer_sequence)
print(list(integer_sequence))
## range(0, 10)
## [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```
1. 索引（Indexing）：選擇串列中的資料我們使用中括號 [] 搭配索引值，值得注意的是索引值從左邊由 0 開始，而非由 1 開始。從右邊則由 -1 開始。
2. 切割（Slicing） ：
(1) 利用 [start:stop:step] 語法對串列指定要切割出來的子集，其中 stop 不會出現在最後選擇出來的結果中，例如我們希望將位於 [0] 、 [1] 、 [2] 的資料另外切割為一個長度為 3 的串列，要使用 [0:3] 而非 [0:2]。

(2) 使用切割的語法時， start 、 stop 與 step 這三個參數都有預設值， start 預設是 0， stop 預設為串列的長度， step 預設為 1，假如沒有指定就採預設值，像是切割出位於 [0] 、 [2] 與 [4] 這三個位置的資料可以簡單使用 [::2] 。

(3) 比較特別的 step 參數如果指定為 -1 可以將串列中的資料順序反轉（Reverse）。
```
print(primes_list[::-1])
## [11, 7, 5, 3, 2]
```
3. 除了索引與切割，常用的串列操作還有新增、刪除與排序資料。
(1) 新增可以使用串列的append() 方法將資料加入到串列末端，這個方法採用直接更動沒有輸出的機制。
(2) 刪除可以使用串列的 pop() 方法將串列末端的資料拋出，這個方法同時採用回傳值與直接更動的機制。
```
primes_list.pop()  # 13 is popped out and returned
print(primes_list) # 13 was deleted
## [2, 3, 5, 7, 11]
```
(3) 排序可以使用串列的 sort() 方法將串列的資料以遞增排序，亦可以指定參數 reverse=True 以遞減排序，這個方法採用直接更動沒有輸出的機制。
```
primes_list = [2, 3, 5, 7, 11]
primes_list.sort(reverse=True)
print(primes_list) # primes_list is now sorted with descending order
primes_list.sort()
print(primes_list) # primes_list is now sorted with ascending order
## [11, 7, 5, 3, 2]
## [2, 3, 5, 7, 11]
```
### tuple
- tuple 與串列最大的差異在於 tuple 是不可變動（Immutable）的資料結構，不具備任何包含新增、刪除與排序資料的操作，這樣的特性讓 tuple 被設計在函數的彈性參數與預設多個回傳值之中。自行定義函數時如果希望參數為不定個數，例如一個能夠進行兩個數字、三個數字甚至 n 個數字相加的函數，彈性參數 *args 在函數作用域中其實就是一個 tuple。
```
def add_n_numbers(*args):
    print(type(args))
    return sum(args)

add_n_numbers(55, 66)
add_n_numbers(55, 66, 77)
## <class 'tuple'>
## 121
## <class 'tuple'>
## 198
```
### 字典 dict
- 新增可以直接宣告 dict_to_be_added["Key"] = Value。
```
primes_dict["6th"] = 13
print(primes_dict)
## {'1st': 2, '2nd': 3, '3rd': 5, '4th': 7, '5th': 11, '6th': 13}
```
- 刪除可以使用字典的 pop(Key, None) 方法將指定的「鍵」與「資料」組合拋出，假如找不到就拋出 None。
```
the_popped_value = primes_dict.pop("6th", None)
print(primes_dict)
## {'1st': 2, '2nd': 3, '3rd': 5, '4th': 7, '5th': 11}
```
- 使用字典的 keys() 、 values() 與 items() 方法，可以分別取出字典中的所有的鍵（Keys）、所有資料（Values）以及「鍵」與「資料」組合（Items）。
```
print(primes_dict.keys())
print(primes_dict.values())
print(primes_dict.items())
## dict_keys(['1st', '2nd', '3rd', '4th', '5th'])
## dict_values([2, 3, 5, 7, 11])
## dict_items([('1st', 2), ('2nd', 3), ('3rd', 5), ('4th', 7), ('5th', 11)])
```
### 集合 set
- 集合 set 是 Python 中用來處理「集合運算」的資料結構，在建立的時候使用大括號 {} 將希望儲存的資訊包括起來，並將希望存放的資料型別與資料結構以逗號分隔。
```
primes_set = {2, 3, 5, 7, 11}
print(type(primes_set))
## <class 'set'>
```
- 這個資料結構用來對應數學中的集合相關定理和操作，所以其中只儲存獨一的資料，若輸入多筆重複資料，則會記錄一筆獨一值，並且是一種「無序」的結構，儲存在其中的資料跟建立時的順序性沒有關聯，可能會在操作後更動順序，但這並無大礙，因為集合並不支援索引，無序這個特性也不會影響集合相關定理和操作。
- 基礎的集合操作有四個：
1. 交集（Intersection）
2. 聯集（Union）
3. 差集（Difference）
4. 對稱差集（Symmetric difference）

上述這四個基礎集合操作都能夠透過呼叫集合的方法實作，其中只有差集沒有交換律（如同減法或者除法一般），另外三者都具有交換律（如同加法或者乘法一般），這些方法都採用以回傳值輸出的機制。
```
primes_set = {2, 3, 5, 7, 11}
odds_set = {1, 3, 5, 7, 9}
print(primes_set.intersection(odds_set))
print(primes_set.union(odds_set))
print(primes_set.difference(odds_set))
print(odds_set.difference(primes_set))
print(primes_set.symmetric_difference(odds_set))
## {3, 5, 7}
## {1, 2, 3, 5, 7, 9, 11}
## {2, 11}
## {1, 9}
## {1, 2, 9, 11}
```
